import{o as Q,c as _e,a as nt,r as Ge,b as Ur,d as q,n as fr,e as _t,t as dr,w as Wn}from"./index.438eaaba.js";var oe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Hn(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),e}var Ot={exports:{}},Ee=1e3,Re=Ee*60,Ce=Re*60,ae=Ce*24,Vn=ae*7,Yn=ae*365.25,Gn=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Kn(t);if(r==="number"&&isFinite(t))return e.long?Xn(t):zn(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Kn(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Yn;case"weeks":case"week":case"w":return r*Vn;case"days":case"day":case"d":return r*ae;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ce;case"minutes":case"minute":case"mins":case"min":case"m":return r*Re;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ee;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function zn(t){var e=Math.abs(t);return e>=ae?Math.round(t/ae)+"d":e>=Ce?Math.round(t/Ce)+"h":e>=Re?Math.round(t/Re)+"m":e>=Ee?Math.round(t/Ee)+"s":t+"ms"}function Xn(t){var e=Math.abs(t);return e>=ae?We(t,e,ae,"day"):e>=Ce?We(t,e,Ce,"hour"):e>=Re?We(t,e,Re,"minute"):e>=Ee?We(t,e,Ee,"second"):t+" ms"}function We(t,e,r,n){var a=e>=r*1.5;return Math.round(t/r)+" "+n+(a?"s":"")}function Jn(t){r.debug=r,r.default=r,r.coerce=g,r.disable=l,r.enable=a,r.enabled=u,r.humanize=Gn,r.destroy=m,Object.keys(t).forEach(y=>{r[y]=t[y]}),r.names=[],r.skips=[],r.formatters={};function e(y){let _=0;for(let w=0;w<y.length;w++)_=(_<<5)-_+y.charCodeAt(w),_|=0;return r.colors[Math.abs(_)%r.colors.length]}r.selectColor=e;function r(y){let _,w=null,S,F;function x(...N){if(!x.enabled)return;const L=x,ue=Number(new Date),Ue=ue-(_||ue);L.diff=Ue,L.prev=_,L.curr=ue,_=ue,N[0]=r.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");let fe=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(de,qe)=>{if(de==="%%")return"%";fe++;const $e=r.formatters[qe];if(typeof $e=="function"){const dt=N[fe];de=$e.call(L,dt),N.splice(fe,1),fe--}return de}),r.formatArgs.call(L,N),(L.log||r.log).apply(L,N)}return x.namespace=y,x.useColors=r.useColors(),x.color=r.selectColor(y),x.extend=n,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(S!==r.namespaces&&(S=r.namespaces,F=r.enabled(y)),F),set:N=>{w=N}}),typeof r.init=="function"&&r.init(x),x}function n(y,_){const w=r(this.namespace+(typeof _=="undefined"?":":_)+y);return w.log=this.log,w}function a(y){r.save(y),r.namespaces=y,r.names=[],r.skips=[];let _;const w=(typeof y=="string"?y:"").split(/[\s,]+/),S=w.length;for(_=0;_<S;_++)!w[_]||(y=w[_].replace(/\*/g,".*?"),y[0]==="-"?r.skips.push(new RegExp("^"+y.slice(1)+"$")):r.names.push(new RegExp("^"+y+"$")))}function l(){const y=[...r.names.map(h),...r.skips.map(h).map(_=>"-"+_)].join(",");return r.enable(""),y}function u(y){if(y[y.length-1]==="*")return!0;let _,w;for(_=0,w=r.skips.length;_<w;_++)if(r.skips[_].test(y))return!1;for(_=0,w=r.names.length;_<w;_++)if(r.names[_].test(y))return!0;return!1}function h(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function g(y){return y instanceof Error?y.stack||y.message:y}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var Zn=Jn;(function(t,e){e.formatArgs=n,e.save=a,e.load=l,e.useColors=r,e.storage=u(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;g.splice(1,0,m,"color: inherit");let y=0,_=0;g[0].replace(/%[a-zA-Z%]/g,w=>{w!=="%%"&&(y++,w==="%c"&&(_=y))}),g.splice(_,0,m)}e.log=console.debug||console.log||(()=>{});function a(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function l(){let g;try{g=e.storage.getItem("debug")}catch{}return!g&&typeof process!="undefined"&&"env"in process&&(g={}.DEBUG),g}function u(){try{return localStorage}catch{}}t.exports=Zn(e);const{formatters:h}=t.exports;h.j=function(g){try{return JSON.stringify(g)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(Ot,Ot.exports);var Qn=function(){if(typeof globalThis=="undefined")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null},Ft={exports:{}},et={exports:{}},Se={},it={};it.byteLength=ri;it.toByteArray=ii;it.fromByteArray=ai;var W=[],P=[],ei=typeof Uint8Array!="undefined"?Uint8Array:Array,mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ye=0,ti=mt.length;ye<ti;++ye)W[ye]=mt[ye],P[mt.charCodeAt(ye)]=ye;P["-".charCodeAt(0)]=62;P["_".charCodeAt(0)]=63;function qr(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function ri(t){var e=qr(t),r=e[0],n=e[1];return(r+n)*3/4-n}function ni(t,e,r){return(e+r)*3/4-r}function ii(t){var e,r=qr(t),n=r[0],a=r[1],l=new ei(ni(t,n,a)),u=0,h=a>0?n-4:n,g;for(g=0;g<h;g+=4)e=P[t.charCodeAt(g)]<<18|P[t.charCodeAt(g+1)]<<12|P[t.charCodeAt(g+2)]<<6|P[t.charCodeAt(g+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=e&255;return a===2&&(e=P[t.charCodeAt(g)]<<2|P[t.charCodeAt(g+1)]>>4,l[u++]=e&255),a===1&&(e=P[t.charCodeAt(g)]<<10|P[t.charCodeAt(g+1)]<<4|P[t.charCodeAt(g+2)]>>2,l[u++]=e>>8&255,l[u++]=e&255),l}function si(t){return W[t>>18&63]+W[t>>12&63]+W[t>>6&63]+W[t&63]}function oi(t,e,r){for(var n,a=[],l=e;l<r;l+=3)n=(t[l]<<16&16711680)+(t[l+1]<<8&65280)+(t[l+2]&255),a.push(si(n));return a.join("")}function ai(t){for(var e,r=t.length,n=r%3,a=[],l=16383,u=0,h=r-n;u<h;u+=l)a.push(oi(t,u,u+l>h?h:u+l));return n===1?(e=t[r-1],a.push(W[e>>2]+W[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],a.push(W[e>>10]+W[e>>4&63]+W[e<<2&63]+"=")),a.join("")}var Yt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Yt.read=function(t,e,r,n,a){var l,u,h=a*8-n-1,g=(1<<h)-1,m=g>>1,y=-7,_=r?a-1:0,w=r?-1:1,S=t[e+_];for(_+=w,l=S&(1<<-y)-1,S>>=-y,y+=h;y>0;l=l*256+t[e+_],_+=w,y-=8);for(u=l&(1<<-y)-1,l>>=-y,y+=n;y>0;u=u*256+t[e+_],_+=w,y-=8);if(l===0)l=1-m;else{if(l===g)return u?NaN:(S?-1:1)*(1/0);u=u+Math.pow(2,n),l=l-m}return(S?-1:1)*u*Math.pow(2,l-n)};Yt.write=function(t,e,r,n,a,l){var u,h,g,m=l*8-a-1,y=(1<<m)-1,_=y>>1,w=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:l-1,F=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,u=y):(u=Math.floor(Math.log(e)/Math.LN2),e*(g=Math.pow(2,-u))<1&&(u--,g*=2),u+_>=1?e+=w/g:e+=w*Math.pow(2,1-_),e*g>=2&&(u++,g/=2),u+_>=y?(h=0,u=y):u+_>=1?(h=(e*g-1)*Math.pow(2,a),u=u+_):(h=e*Math.pow(2,_-1)*Math.pow(2,a),u=0));a>=8;t[r+S]=h&255,S+=F,h/=256,a-=8);for(u=u<<a|h,m+=a;m>0;t[r+S]=u&255,S+=F,u/=256,m-=8);t[r+S-F]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=it,r=Yt,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=h,t.SlowBuffer=ue,t.INSPECT_MAX_BYTES=50;const a=2147483647;t.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const o=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(o,i),o.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(!!h.isBuffer(this))return this.byteOffset}});function u(o){if(o>a)throw new RangeError('The value "'+o+'" is invalid for option "size"');const i=new Uint8Array(o);return Object.setPrototypeOf(i,h.prototype),i}function h(o,i,s){if(typeof o=="number"){if(typeof i=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(o)}return g(o,i,s)}h.poolSize=8192;function g(o,i,s){if(typeof o=="string")return w(o,i);if(ArrayBuffer.isView(o))return F(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(j(o,ArrayBuffer)||o&&j(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(j(o,SharedArrayBuffer)||o&&j(o.buffer,SharedArrayBuffer)))return x(o,i,s);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const c=o.valueOf&&o.valueOf();if(c!=null&&c!==o)return h.from(c,i,s);const f=N(o);if(f)return f;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return h.from(o[Symbol.toPrimitive]("string"),i,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}h.from=function(o,i,s){return g(o,i,s)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function m(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function y(o,i,s){return m(o),o<=0?u(o):i!==void 0?typeof s=="string"?u(o).fill(i,s):u(o).fill(i):u(o)}h.alloc=function(o,i,s){return y(o,i,s)};function _(o){return m(o),u(o<0?0:L(o)|0)}h.allocUnsafe=function(o){return _(o)},h.allocUnsafeSlow=function(o){return _(o)};function w(o,i){if((typeof i!="string"||i==="")&&(i="utf8"),!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i);const s=Ue(o,i)|0;let c=u(s);const f=c.write(o,i);return f!==s&&(c=c.slice(0,f)),c}function S(o){const i=o.length<0?0:L(o.length)|0,s=u(i);for(let c=0;c<i;c+=1)s[c]=o[c]&255;return s}function F(o){if(j(o,Uint8Array)){const i=new Uint8Array(o);return x(i.buffer,i.byteOffset,i.byteLength)}return S(o)}function x(o,i,s){if(i<0||o.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<i+(s||0))throw new RangeError('"length" is outside of buffer bounds');let c;return i===void 0&&s===void 0?c=new Uint8Array(o):s===void 0?c=new Uint8Array(o,i):c=new Uint8Array(o,i,s),Object.setPrototypeOf(c,h.prototype),c}function N(o){if(h.isBuffer(o)){const i=L(o.length)|0,s=u(i);return s.length===0||o.copy(s,0,0,i),s}if(o.length!==void 0)return typeof o.length!="number"||yt(o.length)?u(0):S(o);if(o.type==="Buffer"&&Array.isArray(o.data))return S(o.data)}function L(o){if(o>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return o|0}function ue(o){return+o!=o&&(o=0),h.alloc(+o)}h.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==h.prototype},h.compare=function(i,s){if(j(i,Uint8Array)&&(i=h.from(i,i.offset,i.byteLength)),j(s,Uint8Array)&&(s=h.from(s,s.offset,s.byteLength)),!h.isBuffer(i)||!h.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===s)return 0;let c=i.length,f=s.length;for(let d=0,p=Math.min(c,f);d<p;++d)if(i[d]!==s[d]){c=i[d],f=s[d];break}return c<f?-1:f<c?1:0},h.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(i,s){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return h.alloc(0);let c;if(s===void 0)for(s=0,c=0;c<i.length;++c)s+=i[c].length;const f=h.allocUnsafe(s);let d=0;for(c=0;c<i.length;++c){let p=i[c];if(j(p,Uint8Array))d+p.length>f.length?(h.isBuffer(p)||(p=h.from(p)),p.copy(f,d)):Uint8Array.prototype.set.call(f,p,d);else if(h.isBuffer(p))p.copy(f,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=p.length}return f};function Ue(o,i){if(h.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||j(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);const s=o.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&s===0)return 0;let f=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return gt(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return ur(o).length;default:if(f)return c?-1:gt(o).length;i=(""+i).toLowerCase(),f=!0}}h.byteLength=Ue;function fe(o,i,s){let c=!1;if((i===void 0||i<0)&&(i=0),i>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,i>>>=0,s<=i))return"";for(o||(o="utf8");;)switch(o){case"hex":return Fn(this,i,s);case"utf8":case"utf-8":return rr(this,i,s);case"ascii":return Nn(this,i,s);case"latin1":case"binary":return On(this,i,s);case"base64":return kn(this,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ln(this,i,s);default:if(c)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),c=!0}}h.prototype._isBuffer=!0;function K(o,i,s){const c=o[i];o[i]=o[s],o[s]=c}h.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<i;s+=2)K(this,s,s+1);return this},h.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<i;s+=4)K(this,s,s+3),K(this,s+1,s+2);return this},h.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<i;s+=8)K(this,s,s+7),K(this,s+1,s+6),K(this,s+2,s+5),K(this,s+3,s+4);return this},h.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?rr(this,0,i):fe.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(i){if(!h.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:h.compare(this,i)===0},h.prototype.inspect=function(){let i="";const s=t.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(i,s,c,f,d){if(j(i,Uint8Array)&&(i=h.from(i,i.offset,i.byteLength)),!h.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(s===void 0&&(s=0),c===void 0&&(c=i?i.length:0),f===void 0&&(f=0),d===void 0&&(d=this.length),s<0||c>i.length||f<0||d>this.length)throw new RangeError("out of range index");if(f>=d&&s>=c)return 0;if(f>=d)return-1;if(s>=c)return 1;if(s>>>=0,c>>>=0,f>>>=0,d>>>=0,this===i)return 0;let p=d-f,b=c-s;const B=Math.min(p,b),A=this.slice(f,d),k=i.slice(s,c);for(let T=0;T<B;++T)if(A[T]!==k[T]){p=A[T],b=k[T];break}return p<b?-1:b<p?1:0};function de(o,i,s,c,f){if(o.length===0)return-1;if(typeof s=="string"?(c=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,yt(s)&&(s=f?0:o.length-1),s<0&&(s=o.length+s),s>=o.length){if(f)return-1;s=o.length-1}else if(s<0)if(f)s=0;else return-1;if(typeof i=="string"&&(i=h.from(i,c)),h.isBuffer(i))return i.length===0?-1:qe(o,i,s,c,f);if(typeof i=="number")return i=i&255,typeof Uint8Array.prototype.indexOf=="function"?f?Uint8Array.prototype.indexOf.call(o,i,s):Uint8Array.prototype.lastIndexOf.call(o,i,s):qe(o,[i],s,c,f);throw new TypeError("val must be string, number or Buffer")}function qe(o,i,s,c,f){let d=1,p=o.length,b=i.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(o.length<2||i.length<2)return-1;d=2,p/=2,b/=2,s/=2}function B(k,T){return d===1?k[T]:k.readUInt16BE(T*d)}let A;if(f){let k=-1;for(A=s;A<p;A++)if(B(o,A)===B(i,k===-1?0:A-k)){if(k===-1&&(k=A),A-k+1===b)return k*d}else k!==-1&&(A-=A-k),k=-1}else for(s+b>p&&(s=p-b),A=s;A>=0;A--){let k=!0;for(let T=0;T<b;T++)if(B(o,A+T)!==B(i,T)){k=!1;break}if(k)return A}return-1}h.prototype.includes=function(i,s,c){return this.indexOf(i,s,c)!==-1},h.prototype.indexOf=function(i,s,c){return de(this,i,s,c,!0)},h.prototype.lastIndexOf=function(i,s,c){return de(this,i,s,c,!1)};function $e(o,i,s,c){s=Number(s)||0;const f=o.length-s;c?(c=Number(c),c>f&&(c=f)):c=f;const d=i.length;c>d/2&&(c=d/2);let p;for(p=0;p<c;++p){const b=parseInt(i.substr(p*2,2),16);if(yt(b))return p;o[s+p]=b}return p}function dt(o,i,s,c){return je(gt(i,o.length-s),o,s,c)}function An(o,i,s,c){return je(Un(i),o,s,c)}function xn(o,i,s,c){return je(ur(i),o,s,c)}function Bn(o,i,s,c){return je(qn(i,o.length-s),o,s,c)}h.prototype.write=function(i,s,c,f){if(s===void 0)f="utf8",c=this.length,s=0;else if(c===void 0&&typeof s=="string")f=s,c=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(c)?(c=c>>>0,f===void 0&&(f="utf8")):(f=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const d=this.length-s;if((c===void 0||c>d)&&(c=d),i.length>0&&(c<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");let p=!1;for(;;)switch(f){case"hex":return $e(this,i,s,c);case"utf8":case"utf-8":return dt(this,i,s,c);case"ascii":case"latin1":case"binary":return An(this,i,s,c);case"base64":return xn(this,i,s,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bn(this,i,s,c);default:if(p)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),p=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function kn(o,i,s){return i===0&&s===o.length?e.fromByteArray(o):e.fromByteArray(o.slice(i,s))}function rr(o,i,s){s=Math.min(o.length,s);const c=[];let f=i;for(;f<s;){const d=o[f];let p=null,b=d>239?4:d>223?3:d>191?2:1;if(f+b<=s){let B,A,k,T;switch(b){case 1:d<128&&(p=d);break;case 2:B=o[f+1],(B&192)===128&&(T=(d&31)<<6|B&63,T>127&&(p=T));break;case 3:B=o[f+1],A=o[f+2],(B&192)===128&&(A&192)===128&&(T=(d&15)<<12|(B&63)<<6|A&63,T>2047&&(T<55296||T>57343)&&(p=T));break;case 4:B=o[f+1],A=o[f+2],k=o[f+3],(B&192)===128&&(A&192)===128&&(k&192)===128&&(T=(d&15)<<18|(B&63)<<12|(A&63)<<6|k&63,T>65535&&T<1114112&&(p=T))}}p===null?(p=65533,b=1):p>65535&&(p-=65536,c.push(p>>>10&1023|55296),p=56320|p&1023),c.push(p),f+=b}return In(c)}const nr=4096;function In(o){const i=o.length;if(i<=nr)return String.fromCharCode.apply(String,o);let s="",c=0;for(;c<i;)s+=String.fromCharCode.apply(String,o.slice(c,c+=nr));return s}function Nn(o,i,s){let c="";s=Math.min(o.length,s);for(let f=i;f<s;++f)c+=String.fromCharCode(o[f]&127);return c}function On(o,i,s){let c="";s=Math.min(o.length,s);for(let f=i;f<s;++f)c+=String.fromCharCode(o[f]);return c}function Fn(o,i,s){const c=o.length;(!i||i<0)&&(i=0),(!s||s<0||s>c)&&(s=c);let f="";for(let d=i;d<s;++d)f+=$n[o[d]];return f}function Ln(o,i,s){const c=o.slice(i,s);let f="";for(let d=0;d<c.length-1;d+=2)f+=String.fromCharCode(c[d]+c[d+1]*256);return f}h.prototype.slice=function(i,s){const c=this.length;i=~~i,s=s===void 0?c:~~s,i<0?(i+=c,i<0&&(i=0)):i>c&&(i=c),s<0?(s+=c,s<0&&(s=0)):s>c&&(s=c),s<i&&(s=i);const f=this.subarray(i,s);return Object.setPrototypeOf(f,h.prototype),f};function D(o,i,s){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+i>s)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(i,s,c){i=i>>>0,s=s>>>0,c||D(i,s,this.length);let f=this[i],d=1,p=0;for(;++p<s&&(d*=256);)f+=this[i+p]*d;return f},h.prototype.readUintBE=h.prototype.readUIntBE=function(i,s,c){i=i>>>0,s=s>>>0,c||D(i,s,this.length);let f=this[i+--s],d=1;for(;s>0&&(d*=256);)f+=this[i+--s]*d;return f},h.prototype.readUint8=h.prototype.readUInt8=function(i,s){return i=i>>>0,s||D(i,1,this.length),this[i]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(i,s){return i=i>>>0,s||D(i,2,this.length),this[i]|this[i+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(i,s){return i=i>>>0,s||D(i,2,this.length),this[i]<<8|this[i+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(i,s){return i=i>>>0,s||D(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(i,s){return i=i>>>0,s||D(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},h.prototype.readBigUInt64LE=z(function(i){i=i>>>0,ge(i,"offset");const s=this[i],c=this[i+7];(s===void 0||c===void 0)&&xe(i,this.length-8);const f=s+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,d=this[++i]+this[++i]*2**8+this[++i]*2**16+c*2**24;return BigInt(f)+(BigInt(d)<<BigInt(32))}),h.prototype.readBigUInt64BE=z(function(i){i=i>>>0,ge(i,"offset");const s=this[i],c=this[i+7];(s===void 0||c===void 0)&&xe(i,this.length-8);const f=s*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],d=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+c;return(BigInt(f)<<BigInt(32))+BigInt(d)}),h.prototype.readIntLE=function(i,s,c){i=i>>>0,s=s>>>0,c||D(i,s,this.length);let f=this[i],d=1,p=0;for(;++p<s&&(d*=256);)f+=this[i+p]*d;return d*=128,f>=d&&(f-=Math.pow(2,8*s)),f},h.prototype.readIntBE=function(i,s,c){i=i>>>0,s=s>>>0,c||D(i,s,this.length);let f=s,d=1,p=this[i+--f];for(;f>0&&(d*=256);)p+=this[i+--f]*d;return d*=128,p>=d&&(p-=Math.pow(2,8*s)),p},h.prototype.readInt8=function(i,s){return i=i>>>0,s||D(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},h.prototype.readInt16LE=function(i,s){i=i>>>0,s||D(i,2,this.length);const c=this[i]|this[i+1]<<8;return c&32768?c|4294901760:c},h.prototype.readInt16BE=function(i,s){i=i>>>0,s||D(i,2,this.length);const c=this[i+1]|this[i]<<8;return c&32768?c|4294901760:c},h.prototype.readInt32LE=function(i,s){return i=i>>>0,s||D(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},h.prototype.readInt32BE=function(i,s){return i=i>>>0,s||D(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},h.prototype.readBigInt64LE=z(function(i){i=i>>>0,ge(i,"offset");const s=this[i],c=this[i+7];(s===void 0||c===void 0)&&xe(i,this.length-8);const f=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(c<<24);return(BigInt(f)<<BigInt(32))+BigInt(s+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),h.prototype.readBigInt64BE=z(function(i){i=i>>>0,ge(i,"offset");const s=this[i],c=this[i+7];(s===void 0||c===void 0)&&xe(i,this.length-8);const f=(s<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(f)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+c)}),h.prototype.readFloatLE=function(i,s){return i=i>>>0,s||D(i,4,this.length),r.read(this,i,!0,23,4)},h.prototype.readFloatBE=function(i,s){return i=i>>>0,s||D(i,4,this.length),r.read(this,i,!1,23,4)},h.prototype.readDoubleLE=function(i,s){return i=i>>>0,s||D(i,8,this.length),r.read(this,i,!0,52,8)},h.prototype.readDoubleBE=function(i,s){return i=i>>>0,s||D(i,8,this.length),r.read(this,i,!1,52,8)};function M(o,i,s,c,f,d){if(!h.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>f||i<d)throw new RangeError('"value" argument is out of bounds');if(s+c>o.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(i,s,c,f){if(i=+i,s=s>>>0,c=c>>>0,!f){const b=Math.pow(2,8*c)-1;M(this,i,s,c,b,0)}let d=1,p=0;for(this[s]=i&255;++p<c&&(d*=256);)this[s+p]=i/d&255;return s+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(i,s,c,f){if(i=+i,s=s>>>0,c=c>>>0,!f){const b=Math.pow(2,8*c)-1;M(this,i,s,c,b,0)}let d=c-1,p=1;for(this[s+d]=i&255;--d>=0&&(p*=256);)this[s+d]=i/p&255;return s+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,1,255,0),this[s]=i&255,s+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,2,65535,0),this[s]=i&255,this[s+1]=i>>>8,s+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,2,65535,0),this[s]=i>>>8,this[s+1]=i&255,s+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,4,4294967295,0),this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=i&255,s+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,4,4294967295,0),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4};function ir(o,i,s,c,f){hr(i,c,f,o,s,7);let d=Number(i&BigInt(4294967295));o[s++]=d,d=d>>8,o[s++]=d,d=d>>8,o[s++]=d,d=d>>8,o[s++]=d;let p=Number(i>>BigInt(32)&BigInt(4294967295));return o[s++]=p,p=p>>8,o[s++]=p,p=p>>8,o[s++]=p,p=p>>8,o[s++]=p,s}function sr(o,i,s,c,f){hr(i,c,f,o,s,7);let d=Number(i&BigInt(4294967295));o[s+7]=d,d=d>>8,o[s+6]=d,d=d>>8,o[s+5]=d,d=d>>8,o[s+4]=d;let p=Number(i>>BigInt(32)&BigInt(4294967295));return o[s+3]=p,p=p>>8,o[s+2]=p,p=p>>8,o[s+1]=p,p=p>>8,o[s]=p,s+8}h.prototype.writeBigUInt64LE=z(function(i,s=0){return ir(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=z(function(i,s=0){return sr(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(i,s,c,f){if(i=+i,s=s>>>0,!f){const B=Math.pow(2,8*c-1);M(this,i,s,c,B-1,-B)}let d=0,p=1,b=0;for(this[s]=i&255;++d<c&&(p*=256);)i<0&&b===0&&this[s+d-1]!==0&&(b=1),this[s+d]=(i/p>>0)-b&255;return s+c},h.prototype.writeIntBE=function(i,s,c,f){if(i=+i,s=s>>>0,!f){const B=Math.pow(2,8*c-1);M(this,i,s,c,B-1,-B)}let d=c-1,p=1,b=0;for(this[s+d]=i&255;--d>=0&&(p*=256);)i<0&&b===0&&this[s+d+1]!==0&&(b=1),this[s+d]=(i/p>>0)-b&255;return s+c},h.prototype.writeInt8=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,1,127,-128),i<0&&(i=255+i+1),this[s]=i&255,s+1},h.prototype.writeInt16LE=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,2,32767,-32768),this[s]=i&255,this[s+1]=i>>>8,s+2},h.prototype.writeInt16BE=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,2,32767,-32768),this[s]=i>>>8,this[s+1]=i&255,s+2},h.prototype.writeInt32LE=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,4,2147483647,-2147483648),this[s]=i&255,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24,s+4},h.prototype.writeInt32BE=function(i,s,c){return i=+i,s=s>>>0,c||M(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=i&255,s+4},h.prototype.writeBigInt64LE=z(function(i,s=0){return ir(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=z(function(i,s=0){return sr(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function or(o,i,s,c,f,d){if(s+c>o.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function ar(o,i,s,c,f){return i=+i,s=s>>>0,f||or(o,i,s,4),r.write(o,i,s,c,23,4),s+4}h.prototype.writeFloatLE=function(i,s,c){return ar(this,i,s,!0,c)},h.prototype.writeFloatBE=function(i,s,c){return ar(this,i,s,!1,c)};function cr(o,i,s,c,f){return i=+i,s=s>>>0,f||or(o,i,s,8),r.write(o,i,s,c,52,8),s+8}h.prototype.writeDoubleLE=function(i,s,c){return cr(this,i,s,!0,c)},h.prototype.writeDoubleBE=function(i,s,c){return cr(this,i,s,!1,c)},h.prototype.copy=function(i,s,c,f){if(!h.isBuffer(i))throw new TypeError("argument should be a Buffer");if(c||(c=0),!f&&f!==0&&(f=this.length),s>=i.length&&(s=i.length),s||(s=0),f>0&&f<c&&(f=c),f===c||i.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),i.length-s<f-c&&(f=i.length-s+c);const d=f-c;return this===i&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,c,f):Uint8Array.prototype.set.call(i,this.subarray(c,f),s),d},h.prototype.fill=function(i,s,c,f){if(typeof i=="string"){if(typeof s=="string"?(f=s,s=0,c=this.length):typeof c=="string"&&(f=c,c=this.length),f!==void 0&&typeof f!="string")throw new TypeError("encoding must be a string");if(typeof f=="string"&&!h.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(i.length===1){const p=i.charCodeAt(0);(f==="utf8"&&p<128||f==="latin1")&&(i=p)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(s<0||this.length<s||this.length<c)throw new RangeError("Out of range index");if(c<=s)return this;s=s>>>0,c=c===void 0?this.length:c>>>0,i||(i=0);let d;if(typeof i=="number")for(d=s;d<c;++d)this[d]=i;else{const p=h.isBuffer(i)?i:h.from(i,f),b=p.length;if(b===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(d=0;d<c-s;++d)this[d+s]=p[d%b]}return this};const pe={};function pt(o,i,s){pe[o]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(f){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:f,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}pt("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pt("ERR_INVALID_ARG_TYPE",function(o,i){return`The "${o}" argument must be of type number. Received type ${typeof i}`},TypeError),pt("ERR_OUT_OF_RANGE",function(o,i,s){let c=`The value of "${o}" is out of range.`,f=s;return Number.isInteger(s)&&Math.abs(s)>2**32?f=lr(String(s)):typeof s=="bigint"&&(f=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(f=lr(f)),f+="n"),c+=` It must be ${i}. Received ${f}`,c},RangeError);function lr(o){let i="",s=o.length;const c=o[0]==="-"?1:0;for(;s>=c+4;s-=3)i=`_${o.slice(s-3,s)}${i}`;return`${o.slice(0,s)}${i}`}function Dn(o,i,s){ge(i,"offset"),(o[i]===void 0||o[i+s]===void 0)&&xe(i,o.length-(s+1))}function hr(o,i,s,c,f,d){if(o>s||o<i){const p=typeof i=="bigint"?"n":"";let b;throw d>3?i===0||i===BigInt(0)?b=`>= 0${p} and < 2${p} ** ${(d+1)*8}${p}`:b=`>= -(2${p} ** ${(d+1)*8-1}${p}) and < 2 ** ${(d+1)*8-1}${p}`:b=`>= ${i}${p} and <= ${s}${p}`,new pe.ERR_OUT_OF_RANGE("value",b,o)}Dn(c,f,d)}function ge(o,i){if(typeof o!="number")throw new pe.ERR_INVALID_ARG_TYPE(i,"number",o)}function xe(o,i,s){throw Math.floor(o)!==o?(ge(o,s),new pe.ERR_OUT_OF_RANGE(s||"offset","an integer",o)):i<0?new pe.ERR_BUFFER_OUT_OF_BOUNDS:new pe.ERR_OUT_OF_RANGE(s||"offset",`>= ${s?1:0} and <= ${i}`,o)}const Mn=/[^+/0-9A-Za-z-_]/g;function Pn(o){if(o=o.split("=")[0],o=o.trim().replace(Mn,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function gt(o,i){i=i||1/0;let s;const c=o.length;let f=null;const d=[];for(let p=0;p<c;++p){if(s=o.charCodeAt(p),s>55295&&s<57344){if(!f){if(s>56319){(i-=3)>-1&&d.push(239,191,189);continue}else if(p+1===c){(i-=3)>-1&&d.push(239,191,189);continue}f=s;continue}if(s<56320){(i-=3)>-1&&d.push(239,191,189),f=s;continue}s=(f-55296<<10|s-56320)+65536}else f&&(i-=3)>-1&&d.push(239,191,189);if(f=null,s<128){if((i-=1)<0)break;d.push(s)}else if(s<2048){if((i-=2)<0)break;d.push(s>>6|192,s&63|128)}else if(s<65536){if((i-=3)<0)break;d.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((i-=4)<0)break;d.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return d}function Un(o){const i=[];for(let s=0;s<o.length;++s)i.push(o.charCodeAt(s)&255);return i}function qn(o,i){let s,c,f;const d=[];for(let p=0;p<o.length&&!((i-=2)<0);++p)s=o.charCodeAt(p),c=s>>8,f=s%256,d.push(f),d.push(c);return d}function ur(o){return e.toByteArray(Pn(o))}function je(o,i,s,c){let f;for(f=0;f<c&&!(f+s>=i.length||f>=o.length);++f)i[f+s]=o[f];return f}function j(o,i){return o instanceof i||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===i.name}function yt(o){return o!==o}const $n=function(){const o="0123456789abcdef",i=new Array(256);for(let s=0;s<16;++s){const c=s*16;for(let f=0;f<16;++f)i[c+f]=o[s]+o[f]}return i}();function z(o){return typeof BigInt=="undefined"?jn:o}function jn(){throw new Error("BigInt not supported")}})(Se);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Se,n=r.Buffer;function a(u,h){for(var g in u)h[g]=u[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=l);function l(u,h,g){return n(u,h,g)}l.prototype=Object.create(n.prototype),a(n,l),l.from=function(u,h,g){if(typeof u=="number")throw new TypeError("Argument must not be a number");return n(u,h,g)},l.alloc=function(u,h,g){if(typeof u!="number")throw new TypeError("Argument must be a number");var m=n(u);return h!==void 0?typeof g=="string"?m.fill(h,g):m.fill(h):m.fill(0),m},l.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n(u)},l.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}})(et,et.exports);var wt=65536,ci=4294967295;function li(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var hi=et.exports.Buffer,tt=oe.crypto||oe.msCrypto;tt&&tt.getRandomValues?Ft.exports=ui:Ft.exports=li;function ui(t,e){if(t>ci)throw new RangeError("requested too many random bytes");var r=hi.allocUnsafe(t);if(t>0)if(t>wt)for(var n=0;n<t;n+=wt)tt.getRandomValues(r.slice(n,n+wt));else tt.getRandomValues(r);return typeof e=="function"?process.nextTick(function(){e(null,r)}):r}var Lt={exports:{}},fi={},di=Object.freeze(Object.defineProperty({__proto__:null,default:fi},Symbol.toStringTag,{value:"Module"})),st=Hn(di),$r=st.EventEmitter;function pr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pr(Object(r),!0).forEach(function(n){gi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _i(t,e,r){return e&&gr(t.prototype,e),r&&gr(t,r),t}var mi=Se,Ke=mi.Buffer,wi=st,Dt=wi.inspect,bi=Dt&&Dt.custom||"inspect";function Ei(t,e,r){Ke.prototype.copy.call(t,e,r)}var Ri=function(){function t(){yi(this,t),this.head=null,this.tail=null,this.length=0}return _i(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,a=""+n.data;n=n.next;)a+=r+n.data;return a}},{key:"concat",value:function(r){if(this.length===0)return Ke.alloc(0);for(var n=Ke.allocUnsafe(r>>>0),a=this.head,l=0;a;)Ei(a.data,n,l),l+=a.data.length,a=a.next;return n}},{key:"consume",value:function(r,n){var a;return r<this.head.data.length?(a=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?a=this.shift():a=n?this._getString(r):this._getBuffer(r),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,a=1,l=n.data;for(r-=l.length;n=n.next;){var u=n.data,h=r>u.length?u.length:r;if(h===u.length?l+=u:l+=u.slice(0,r),r-=h,r===0){h===u.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=u.slice(h));break}++a}return this.length-=a,l}},{key:"_getBuffer",value:function(r){var n=Ke.allocUnsafe(r),a=this.head,l=1;for(a.data.copy(n),r-=a.data.length;a=a.next;){var u=a.data,h=r>u.length?u.length:r;if(u.copy(n,n.length-r,0,h),r-=h,r===0){h===u.length?(++l,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=u.slice(h));break}++l}return this.length-=l,n}},{key:bi,value:function(r,n){return Dt(this,pi({},n,{depth:0,customInspect:!1}))}}]),t}();function Ci(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Mt,this,t)):process.nextTick(Mt,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(l){!e&&l?r._writableState?r._writableState.errorEmitted?process.nextTick(ze,r):(r._writableState.errorEmitted=!0,process.nextTick(yr,r,l)):process.nextTick(yr,r,l):e?(process.nextTick(ze,r),e(l)):process.nextTick(ze,r)}),this)}function yr(t,e){Mt(t,e),ze(t)}function ze(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function vi(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Mt(t,e){t.emit("error",e)}function Si(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var jr={destroy:Ci,undestroy:vi,errorOrDestroy:Si},he={};function Ti(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Wr={};function U(t,e,r){r||(r=Error);function n(l,u,h){return typeof e=="string"?e:e(l,u,h)}var a=function(l){Ti(u,l);function u(h,g,m){return l.call(this,n(h,g,m))||this}return u}(r);a.prototype.name=r.name,a.prototype.code=t,Wr[t]=a}function _r(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Ai(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function xi(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Bi(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}U("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);U("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Ai(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var a;if(xi(t," argument"))a="The ".concat(t," ").concat(n," ").concat(_r(e,"type"));else{var l=Bi(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(l," ").concat(n," ").concat(_r(e,"type"))}return a+=". Received type ".concat(typeof r),a},TypeError);U("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");U("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});U("ERR_STREAM_PREMATURE_CLOSE","Premature close");U("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});U("ERR_MULTIPLE_CALLBACK","Callback called multiple times");U("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");U("ERR_STREAM_WRITE_AFTER_END","write after end");U("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);U("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);U("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");he.codes=Wr;var ki=he.codes.ERR_INVALID_OPT_VALUE;function Ii(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Ni(t,e,r,n){var a=Ii(e,n,r);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=n?r:"highWaterMark";throw new ki(l,a)}return Math.floor(a)}return t.objectMode?16:16*1024}var Hr={getHighWaterMark:Ni},ce={exports:{}};typeof Object.create=="function"?ce.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ce.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Oi=Fi;function Fi(t,e){if(bt("noDeprecation"))return t;var r=!1;function n(){if(!r){if(bt("throwDeprecation"))throw new Error(e);bt("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function bt(t){try{if(!oe.localStorage)return!1}catch{return!1}var e=oe.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var Vr=I;function Yr(t){var e=this;this.next=null,this.entry=null,this.finish=function(){as(e,t)}}var me;I.WritableState=De;var Li={deprecate:Oi},Gr=$r,ot=Se.Buffer,Di=oe.Uint8Array||function(){};function Mi(t){return ot.from(t)}function Pi(t){return ot.isBuffer(t)||t instanceof Di}var Gt=jr,Ui=Hr,qi=Ui.getHighWaterMark,re=he.codes,$i=re.ERR_INVALID_ARG_TYPE,ji=re.ERR_METHOD_NOT_IMPLEMENTED,Wi=re.ERR_MULTIPLE_CALLBACK,Hi=re.ERR_STREAM_CANNOT_PIPE,Vi=re.ERR_STREAM_DESTROYED,Yi=re.ERR_STREAM_NULL_VALUES,Gi=re.ERR_STREAM_WRITE_AFTER_END,Ki=re.ERR_UNKNOWN_ENCODING,ve=Gt.errorOrDestroy;ce.exports(I,Gr);function zi(){}function De(t,e,r){me=me||Te,t=t||{},typeof r!="boolean"&&(r=e instanceof me),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=qi(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){rs(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Yr(this)}De.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(De.prototype,"buffer",{get:Li.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Xe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Xe=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return Xe.call(this,e)?!0:this!==I?!1:e&&e._writableState instanceof De}})):Xe=function(e){return e instanceof this};function I(t){me=me||Te;var e=this instanceof me;if(!e&&!Xe.call(I,this))return new I(t);this._writableState=new De(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Gr.call(this)}I.prototype.pipe=function(){ve(this,new Hi)};function Xi(t,e){var r=new Gi;ve(t,r),process.nextTick(e,r)}function Ji(t,e,r,n){var a;return r===null?a=new Yi:typeof r!="string"&&!e.objectMode&&(a=new $i("chunk",["string","Buffer"],r)),a?(ve(t,a),process.nextTick(n,a),!1):!0}I.prototype.write=function(t,e,r){var n=this._writableState,a=!1,l=!n.objectMode&&Pi(t);return l&&!ot.isBuffer(t)&&(t=Mi(t)),typeof e=="function"&&(r=e,e=null),l?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=zi),n.ending?Xi(this,r):(l||Ji(this,n,t,r))&&(n.pendingcb++,a=Qi(this,n,l,t,e,r)),a};I.prototype.cork=function(){this._writableState.corked++};I.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Kr(this,t))};I.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Ki(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Zi(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=ot.from(e,r)),e}Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Qi(t,e,r,n,a,l){if(!r){var u=Zi(e,n,a);n!==u&&(r=!0,a="buffer",n=u)}var h=e.objectMode?1:n.length;e.length+=h;var g=e.length<e.highWaterMark;if(g||(e.needDrain=!0),e.writing||e.corked){var m=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:l,next:null},m?m.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Pt(t,e,!1,h,n,a,l);return g}function Pt(t,e,r,n,a,l,u){e.writelen=n,e.writecb=u,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Vi("write")):r?t._writev(a,e.onwrite):t._write(a,l,e.onwrite),e.sync=!1}function es(t,e,r,n,a){--e.pendingcb,r?(process.nextTick(a,n),process.nextTick(Fe,t,e),t._writableState.errorEmitted=!0,ve(t,n)):(a(n),t._writableState.errorEmitted=!0,ve(t,n),Fe(t,e))}function ts(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function rs(t,e){var r=t._writableState,n=r.sync,a=r.writecb;if(typeof a!="function")throw new Wi;if(ts(r),e)es(t,r,n,e,a);else{var l=zr(r)||t.destroyed;!l&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Kr(t,r),n?process.nextTick(mr,t,r,l,a):mr(t,r,l,a)}}function mr(t,e,r,n){r||ns(t,e),e.pendingcb--,n(),Fe(t,e)}function ns(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Kr(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,a=new Array(n),l=e.corkedRequestsFree;l.entry=r;for(var u=0,h=!0;r;)a[u]=r,r.isBuf||(h=!1),r=r.next,u+=1;a.allBuffers=h,Pt(t,e,!0,e.length,a,"",l.finish),e.pendingcb++,e.lastBufferedRequest=null,l.next?(e.corkedRequestsFree=l.next,l.next=null):e.corkedRequestsFree=new Yr(e),e.bufferedRequestCount=0}else{for(;r;){var g=r.chunk,m=r.encoding,y=r.callback,_=e.objectMode?1:g.length;if(Pt(t,e,!1,_,g,m,y),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}I.prototype._write=function(t,e,r){r(new ji("_write()"))};I.prototype._writev=null;I.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||os(this,n,r),this};Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function zr(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function is(t,e){t._final(function(r){e.pendingcb--,r&&ve(t,r),e.prefinished=!0,t.emit("prefinish"),Fe(t,e)})}function ss(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(is,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Fe(t,e){var r=zr(e);if(r&&(ss(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function os(t,e,r){e.ending=!0,Fe(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function as(t,e,r){var n=t.entry;for(t.entry=null;n;){var a=n.callback;e.pendingcb--,a(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});I.prototype.destroy=Gt.destroy;I.prototype._undestroy=Gt.undestroy;I.prototype._destroy=function(t,e){e(t)};var cs=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},Te=V,Xr=Zr,Ut=Vr;ce.exports(V,Xr);for(var wr=cs(Ut.prototype),Et=0;Et<wr.length;Et++){var Rt=wr[Et];V.prototype[Rt]||(V.prototype[Rt]=Ut.prototype[Rt])}function V(t){if(!(this instanceof V))return new V(t);Xr.call(this,t),Ut.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ls)))}Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(V.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(V.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ls(){this._writableState.ended||process.nextTick(hs,this)}function hs(t){t.end()}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var Kt={},zt=et.exports.Buffer,br=zt.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function us(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function fs(t){var e=us(t);if(typeof e!="string"&&(zt.isEncoding===br||!br(t)))throw new Error("Unknown encoding: "+t);return e||t}Kt.StringDecoder=Me;function Me(t){this.encoding=fs(t);var e;switch(this.encoding){case"utf16le":this.text=ms,this.end=ws,e=4;break;case"utf8":this.fillLast=gs,e=4;break;case"base64":this.text=bs,this.end=Es,e=3;break;default:this.write=Rs,this.end=Cs;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=zt.allocUnsafe(e)}Me.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Me.prototype.end=_s;Me.prototype.text=ys;Me.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Ct(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function ds(t,e,r){var n=e.length-1;if(n<r)return 0;var a=Ct(e[n]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--n<r||a===-2?0:(a=Ct(e[n]),a>=0?(a>0&&(t.lastNeed=a-2),a):--n<r||a===-2?0:(a=Ct(e[n]),a>=0?(a>0&&(a===2?a=0:t.lastNeed=a-3),a):0))}function ps(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function gs(t){var e=this.lastTotal-this.lastNeed,r=ps(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function ys(t,e){var r=ds(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function _s(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function ms(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function ws(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function bs(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Es(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Rs(t){return t.toString(this.encoding)}function Cs(t){return t&&t.length?this.write(t):""}var Er=he.codes.ERR_STREAM_PREMATURE_CLOSE;function vs(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];t.apply(this,n)}}}function Ss(){}function Ts(t){return t.setHeader&&typeof t.abort=="function"}function Jr(t,e,r){if(typeof e=="function")return Jr(t,null,e);e||(e={}),r=vs(r||Ss);var n=e.readable||e.readable!==!1&&t.readable,a=e.writable||e.writable!==!1&&t.writable,l=function(){t.writable||h()},u=t._writableState&&t._writableState.finished,h=function(){a=!1,u=!0,n||r.call(t)},g=t._readableState&&t._readableState.endEmitted,m=function(){n=!1,g=!0,a||r.call(t)},y=function(F){r.call(t,F)},_=function(){var F;if(n&&!g)return(!t._readableState||!t._readableState.ended)&&(F=new Er),r.call(t,F);if(a&&!u)return(!t._writableState||!t._writableState.ended)&&(F=new Er),r.call(t,F)},w=function(){t.req.on("finish",h)};return Ts(t)?(t.on("complete",h),t.on("abort",_),t.req?w():t.on("request",w)):a&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",m),t.on("finish",h),e.error!==!1&&t.on("error",y),t.on("close",_),function(){t.removeListener("complete",h),t.removeListener("abort",_),t.removeListener("request",w),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",m),t.removeListener("error",y),t.removeListener("close",_)}}var Xt=Jr,He;function X(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var As=Xt,J=Symbol("lastResolve"),ne=Symbol("lastReject"),Ie=Symbol("error"),rt=Symbol("ended"),ie=Symbol("lastPromise"),Jt=Symbol("handlePromise"),se=Symbol("stream");function ee(t,e){return{value:t,done:e}}function xs(t){var e=t[J];if(e!==null){var r=t[se].read();r!==null&&(t[ie]=null,t[J]=null,t[ne]=null,e(ee(r,!1)))}}function Bs(t){process.nextTick(xs,t)}function ks(t,e){return function(r,n){t.then(function(){if(e[rt]){r(ee(void 0,!0));return}e[Jt](r,n)},n)}}var Is=Object.getPrototypeOf(function(){}),Ns=Object.setPrototypeOf((He={get stream(){return this[se]},next:function(){var e=this,r=this[Ie];if(r!==null)return Promise.reject(r);if(this[rt])return Promise.resolve(ee(void 0,!0));if(this[se].destroyed)return new Promise(function(u,h){process.nextTick(function(){e[Ie]?h(e[Ie]):u(ee(void 0,!0))})});var n=this[ie],a;if(n)a=new Promise(ks(n,this));else{var l=this[se].read();if(l!==null)return Promise.resolve(ee(l,!1));a=new Promise(this[Jt])}return this[ie]=a,a}},X(He,Symbol.asyncIterator,function(){return this}),X(He,"return",function(){var e=this;return new Promise(function(r,n){e[se].destroy(null,function(a){if(a){n(a);return}r(ee(void 0,!0))})})}),He),Is),Os=function(e){var r,n=Object.create(Ns,(r={},X(r,se,{value:e,writable:!0}),X(r,J,{value:null,writable:!0}),X(r,ne,{value:null,writable:!0}),X(r,Ie,{value:null,writable:!0}),X(r,rt,{value:e._readableState.endEmitted,writable:!0}),X(r,Jt,{value:function(l,u){var h=n[se].read();h?(n[ie]=null,n[J]=null,n[ne]=null,l(ee(h,!1))):(n[J]=l,n[ne]=u)},writable:!0}),r));return n[ie]=null,As(e,function(a){if(a&&a.code!=="ERR_STREAM_PREMATURE_CLOSE"){var l=n[ne];l!==null&&(n[ie]=null,n[J]=null,n[ne]=null,l(a)),n[Ie]=a;return}var u=n[J];u!==null&&(n[ie]=null,n[J]=null,n[ne]=null,u(ee(void 0,!0))),n[rt]=!0}),e.on("readable",Bs.bind(null,n)),n},Fs=Os,Ls=function(){throw new Error("Readable.from is not available in the browser")},Zr=v,we;v.ReadableState=en;st.EventEmitter;var Qr=function(e,r){return e.listeners(r).length},Pe=$r,at=Se.Buffer,Ds=oe.Uint8Array||function(){};function Ms(t){return at.from(t)}function Ps(t){return at.isBuffer(t)||t instanceof Ds}var vt=st,E;vt&&vt.debuglog?E=vt.debuglog("stream"):E=function(){};var Us=Ri,Zt=jr,qs=Hr,$s=qs.getHighWaterMark,ct=he.codes,js=ct.ERR_INVALID_ARG_TYPE,Ws=ct.ERR_STREAM_PUSH_AFTER_EOF,Hs=ct.ERR_METHOD_NOT_IMPLEMENTED,Vs=ct.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,be,St,Tt;ce.exports(v,Pe);var Ne=Zt.errorOrDestroy,At=["error","close","destroy","pause","resume"];function Ys(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function en(t,e,r){we=we||Te,t=t||{},typeof r!="boolean"&&(r=e instanceof we),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=$s(this,t,"readableHighWaterMark",r),this.buffer=new Us,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(be||(be=Kt.StringDecoder),this.decoder=new be(t.encoding),this.encoding=t.encoding)}function v(t){if(we=we||Te,!(this instanceof v))return new v(t);var e=this instanceof we;this._readableState=new en(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Pe.call(this)}Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});v.prototype.destroy=Zt.destroy;v.prototype._undestroy=Zt.undestroy;v.prototype._destroy=function(t,e){e(t)};v.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=at.from(t,e),e=""),n=!0),tn(this,t,e,!1,n)};v.prototype.unshift=function(t){return tn(this,t,null,!0,!1)};function tn(t,e,r,n,a){E("readableAddChunk",e);var l=t._readableState;if(e===null)l.reading=!1,zs(t,l);else{var u;if(a||(u=Gs(l,e)),u)Ne(t,u);else if(l.objectMode||e&&e.length>0)if(typeof e!="string"&&!l.objectMode&&Object.getPrototypeOf(e)!==at.prototype&&(e=Ms(e)),n)l.endEmitted?Ne(t,new Vs):xt(t,l,e,!0);else if(l.ended)Ne(t,new Ws);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(e=l.decoder.write(e),l.objectMode||e.length!==0?xt(t,l,e,!1):qt(t,l)):xt(t,l,e,!1)}else n||(l.reading=!1,qt(t,l))}return!l.ended&&(l.length<l.highWaterMark||l.length===0)}function xt(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&lt(t)),qt(t,e)}function Gs(t,e){var r;return!Ps(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new js("chunk",["string","Buffer","Uint8Array"],e)),r}v.prototype.isPaused=function(){return this._readableState.flowing===!1};v.prototype.setEncoding=function(t){be||(be=Kt.StringDecoder);var e=new be(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Rr=1073741824;function Ks(t){return t>=Rr?t=Rr:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Cr(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Ks(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}v.prototype.read=function(t){E("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return E("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Bt(this):lt(this),null;if(t=Cr(t,e),t===0&&e.ended)return e.length===0&&Bt(this),null;var n=e.needReadable;E("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,E("length less than watermark",n)),e.ended||e.reading?(n=!1,E("reading or ended",n)):n&&(E("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Cr(r,e)));var a;return t>0?a=sn(t,e):a=null,a===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Bt(this)),a!==null&&this.emit("data",a),a};function zs(t,e){if(E("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?lt(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,rn(t)))}}function lt(t){var e=t._readableState;E("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(E("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(rn,t))}function rn(t){var e=t._readableState;E("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Qt(t)}function qt(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(Xs,t,e))}function Xs(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(E("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}v.prototype._read=function(t){Ne(this,new Hs("_read()"))};v.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,E("pipe count=%d opts=%j",n.pipesCount,e);var a=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,l=a?h:x;n.endEmitted?process.nextTick(l):r.once("end",l),t.on("unpipe",u);function u(N,L){E("onunpipe"),N===r&&L&&L.hasUnpiped===!1&&(L.hasUnpiped=!0,y())}function h(){E("onend"),t.end()}var g=Js(r);t.on("drain",g);var m=!1;function y(){E("cleanup"),t.removeListener("close",S),t.removeListener("finish",F),t.removeListener("drain",g),t.removeListener("error",w),t.removeListener("unpipe",u),r.removeListener("end",h),r.removeListener("end",x),r.removeListener("data",_),m=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&g()}r.on("data",_);function _(N){E("ondata");var L=t.write(N);E("dest.write",L),L===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&on(n.pipes,t)!==-1)&&!m&&(E("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function w(N){E("onerror",N),x(),t.removeListener("error",w),Qr(t,"error")===0&&Ne(t,N)}Ys(t,"error",w);function S(){t.removeListener("finish",F),x()}t.once("close",S);function F(){E("onfinish"),t.removeListener("close",S),x()}t.once("finish",F);function x(){E("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(E("pipe resume"),r.resume()),t};function Js(t){return function(){var r=t._readableState;E("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Qr(t,"data")&&(r.flowing=!0,Qt(t))}}v.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,a=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var l=0;l<a;l++)n[l].emit("unpipe",this,{hasUnpiped:!1});return this}var u=on(e.pipes,t);return u===-1?this:(e.pipes.splice(u,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};v.prototype.on=function(t,e){var r=Pe.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,E("on readable",n.length,n.reading),n.length?lt(this):n.reading||process.nextTick(Zs,this)),r};v.prototype.addListener=v.prototype.on;v.prototype.removeListener=function(t,e){var r=Pe.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(nn,this),r};v.prototype.removeAllListeners=function(t){var e=Pe.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(nn,this),e};function nn(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Zs(t){E("readable nexttick read 0"),t.read(0)}v.prototype.resume=function(){var t=this._readableState;return t.flowing||(E("resume"),t.flowing=!t.readableListening,Qs(this,t)),t.paused=!1,this};function Qs(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(eo,t,e))}function eo(t,e){E("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Qt(t),e.flowing&&!e.reading&&t.read(0)}v.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Qt(t){var e=t._readableState;for(E("flow",e.flowing);e.flowing&&t.read()!==null;);}v.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(E("wrapped end"),r.decoder&&!r.ended){var u=r.decoder.end();u&&u.length&&e.push(u)}e.push(null)}),t.on("data",function(u){if(E("wrapped data"),r.decoder&&(u=r.decoder.write(u)),!(r.objectMode&&u==null)&&!(!r.objectMode&&(!u||!u.length))){var h=e.push(u);h||(n=!0,t.pause())}});for(var a in t)this[a]===void 0&&typeof t[a]=="function"&&(this[a]=function(h){return function(){return t[h].apply(t,arguments)}}(a));for(var l=0;l<At.length;l++)t.on(At[l],this.emit.bind(this,At[l]));return this._read=function(u){E("wrapped _read",u),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(v.prototype[Symbol.asyncIterator]=function(){return St===void 0&&(St=Fs),St(this)});Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(v.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(v.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});v._fromList=sn;Object.defineProperty(v.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function sn(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Bt(t){var e=t._readableState;E("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(to,e,t))}function to(t,e){if(E("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(v.from=function(t,e){return Tt===void 0&&(Tt=Ls),Tt(v,t,e)});function on(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}var an=G,ht=he.codes,ro=ht.ERR_METHOD_NOT_IMPLEMENTED,no=ht.ERR_MULTIPLE_CALLBACK,io=ht.ERR_TRANSFORM_ALREADY_TRANSFORMING,so=ht.ERR_TRANSFORM_WITH_LENGTH_0,ut=Te;ce.exports(G,ut);function oo(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new no);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function G(t){if(!(this instanceof G))return new G(t);ut.call(this,t),this._transformState={afterTransform:oo.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",ao)}function ao(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){vr(t,e,r)}):vr(this,null,null)}G.prototype.push=function(t,e){return this._transformState.needTransform=!1,ut.prototype.push.call(this,t,e)};G.prototype._transform=function(t,e,r){r(new ro("_transform()"))};G.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}};G.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};G.prototype._destroy=function(t,e){ut.prototype._destroy.call(this,t,function(r){e(r)})};function vr(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new so;if(t._transformState.transforming)throw new io;return t.push(null)}var co=Le,cn=an;ce.exports(Le,cn);function Le(t){if(!(this instanceof Le))return new Le(t);cn.call(this,t)}Le.prototype._transform=function(t,e,r){r(null,t)};var kt;function lo(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var ln=he.codes,ho=ln.ERR_MISSING_ARGS,uo=ln.ERR_STREAM_DESTROYED;function Sr(t){if(t)throw t}function fo(t){return t.setHeader&&typeof t.abort=="function"}function po(t,e,r,n){n=lo(n);var a=!1;t.on("close",function(){a=!0}),kt===void 0&&(kt=Xt),kt(t,{readable:e,writable:r},function(u){if(u)return n(u);a=!0,n()});var l=!1;return function(u){if(!a&&!l){if(l=!0,fo(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(u||new uo("pipe"))}}}function Tr(t){t()}function go(t,e){return t.pipe(e)}function yo(t){return!t.length||typeof t[t.length-1]!="function"?Sr:t.pop()}function _o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=yo(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ho("streams");var a,l=e.map(function(u,h){var g=h<e.length-1,m=h>0;return po(u,g,m,function(y){a||(a=y),y&&l.forEach(Tr),!g&&(l.forEach(Tr),n(a))})});return e.reduce(go)}var mo=_o;(function(t,e){e=t.exports=Zr,e.Stream=e,e.Readable=e,e.Writable=Vr,e.Duplex=Te,e.Transform=an,e.PassThrough=co,e.finished=Xt,e.pipeline=mo})(Lt,Lt.exports);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Ar;var wo=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:oe):t=>(Ar||(Ar=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));function xr(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function bo(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return xr(t,r)}catch{r.message=t.message,r.stack=t.stack;const a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(t)),xr(new a,r)}}var Eo=bo;/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const Ro=Ot.exports("simple-peer"),hn=Qn,Br=Ft.exports,Co=Lt.exports,It=wo,R=Eo,{Buffer:vo}=Se,Nt=64*1024,So=5*1e3,To=5*1e3;function kr(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function Ao(t){console.warn(t)}class le extends Co.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=Br(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||Br(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||le.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},le.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(r=>r),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||So,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:hn(),!this._wrtc)throw R(typeof window=="undefined"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(r){this.destroy(R(r,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=r=>{this._onIceCandidate(r)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(r=>{this.destroy(R(r,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=r=>{this._setupData(r)},this.streams&&this.streams.forEach(r=>{this.addStream(r)}),this._pc.ontrack=r=>{this._onTrack(r)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw R(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(r=>{this._addIceCandidate(r)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(r=>{this.destroy(R(r,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(R(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const r=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(r).catch(n=>{!r.address||r.address.endsWith(".local")?Ao("Ignoring unsupported ICE candidate."):this.destroy(R(n,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw R(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,r){if(!this.destroying){if(this.destroyed)throw R(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,r),this._needsNegotiation()}catch(n){this.destroy(R(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:r}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw R(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(r=>{this.addTrack(r,e)})}}addTrack(e,r){if(this.destroying)return;if(this.destroyed)throw R(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let a=n.get(r);if(!a)a=this._pc.addTrack(e,r),n.set(r,a),this._senderMap.set(e,n),this._needsNegotiation();else throw a.removed?R(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):R(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,r,n){if(this.destroying)return;if(this.destroyed)throw R(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const a=this._senderMap.get(e),l=a?a.get(n):null;if(!l)throw R(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");r&&this._senderMap.set(r,a),l.replaceTrack!=null?l.replaceTrack(r):this.destroy(R(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,r){if(this.destroying)return;if(this.destroyed)throw R(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),a=n?n.get(r):null;if(!a)throw R(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{a.removed=!0,this._pc.removeTrack(a)}catch(l){l.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(a):this.destroy(R(l,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw R(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(r=>{this.removeTrack(r,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,It(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw R(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,r){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),It(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),r()}))}_setupData(e){if(!e.channel)return this.destroy(R(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Nt),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{const a=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(R(a,"ERR_DATA_CHANNEL"))};let r=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(r&&this._onChannelClose(),r=!0):r=!1},To)}_read(){}_write(e,r,n){if(this.destroyed)return n(R(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(a){return this.destroy(R(a,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Nt?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=kr(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const r=()=>{if(this.destroyed)return;const l=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:l.type,sdp:l.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},a=l=>{this.destroy(R(l,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(a)}).catch(e=>{this.destroy(R(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=kr(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const r=()=>{if(this.destroyed)return;const l=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:l.type,sdp:l.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},a=l=>{this.destroy(R(l,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(a)}).catch(e=>{this.destroy(R(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(R(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,r=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,r),this.emit("iceStateChange",e,r),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(R(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(R(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const r=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(a=>{Object.assign(n,a)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const a=[];n.forEach(l=>{a.push(r(l))}),e(null,a)},n=>e(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;const a=[];n.result().forEach(l=>{const u={};l.names().forEach(h=>{u[h]=l.stat(h)}),u.id=l.id,u.type=l.type,u.timestamp=l.timestamp,a.push(r(u))}),e(null,a)},n=>e(n)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((r,n)=>{if(this.destroyed)return;r&&(n=[]);const a={},l={},u={};let h=!1;n.forEach(m=>{(m.type==="remotecandidate"||m.type==="remote-candidate")&&(a[m.id]=m),(m.type==="localcandidate"||m.type==="local-candidate")&&(l[m.id]=m),(m.type==="candidatepair"||m.type==="candidate-pair")&&(u[m.id]=m)});const g=m=>{h=!0;let y=l[m.localCandidateId];y&&(y.ip||y.address)?(this.localAddress=y.ip||y.address,this.localPort=Number(y.port)):y&&y.ipAddress?(this.localAddress=y.ipAddress,this.localPort=Number(y.portNumber)):typeof m.googLocalAddress=="string"&&(y=m.googLocalAddress.split(":"),this.localAddress=y[0],this.localPort=Number(y[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let _=a[m.remoteCandidateId];_&&(_.ip||_.address)?(this.remoteAddress=_.ip||_.address,this.remotePort=Number(_.port)):_&&_.ipAddress?(this.remoteAddress=_.ipAddress,this.remotePort=Number(_.portNumber)):typeof m.googRemoteAddress=="string"&&(_=m.googRemoteAddress.split(":"),this.remoteAddress=_[0],this.remotePort=Number(_[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(m=>{m.type==="transport"&&m.selectedCandidatePairId&&g(u[m.selectedCandidatePairId]),(m.type==="googCandidatePair"&&m.googActiveConnection==="true"||(m.type==="candidatepair"||m.type==="candidate-pair")&&m.selected)&&g(m)}),!h&&(!Object.keys(u).length||Object.keys(l).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(y){return this.destroy(R(y,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const m=this._cb;this._cb=null,m(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>Nt||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let r=e.data;r instanceof ArrayBuffer&&(r=vo.from(r)),this.push(r)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(r=>{this._debug("on track"),this.emit("track",e.track,r),this._remoteTracks.push({track:e.track,stream:r}),!this._remoteStreams.some(n=>n.id===r.id)&&(this._remoteStreams.push(r),It(()=>{this._debug("on stream"),this.emit("stream",r)}))})}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],Ro.apply(null,e)}}le.WEBRTC_SUPPORT=!!hn();le.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};le.channelConfig={};var xo=le;const Y=Object.create(null);Y.open="0";Y.close="1";Y.ping="2";Y.pong="3";Y.message="4";Y.upgrade="5";Y.noop="6";const Je=Object.create(null);Object.keys(Y).forEach(t=>{Je[Y[t]]=t});const Bo={type:"error",data:"parser error"},ko=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Io=typeof ArrayBuffer=="function",No=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,un=({type:t,data:e},r,n)=>ko&&e instanceof Blob?r?n(e):Ir(e,n):Io&&(e instanceof ArrayBuffer||No(e))?r?n(e):Ir(new Blob([e]),n):n(Y[t]+(e||"")),Ir=(t,e)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];e("b"+n)},r.readAsDataURL(t)},Nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ke=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let t=0;t<Nr.length;t++)ke[Nr.charCodeAt(t)]=t;const Oo=t=>{let e=t.length*.75,r=t.length,n,a=0,l,u,h,g;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const m=new ArrayBuffer(e),y=new Uint8Array(m);for(n=0;n<r;n+=4)l=ke[t.charCodeAt(n)],u=ke[t.charCodeAt(n+1)],h=ke[t.charCodeAt(n+2)],g=ke[t.charCodeAt(n+3)],y[a++]=l<<2|u>>4,y[a++]=(u&15)<<4|h>>2,y[a++]=(h&3)<<6|g&63;return m},Fo=typeof ArrayBuffer=="function",fn=(t,e)=>{if(typeof t!="string")return{type:"message",data:dn(t,e)};const r=t.charAt(0);return r==="b"?{type:"message",data:Lo(t.substring(1),e)}:Je[r]?t.length>1?{type:Je[r],data:t.substring(1)}:{type:Je[r]}:Bo},Lo=(t,e)=>{if(Fo){const r=Oo(t);return dn(r,e)}else return{base64:!0,data:t}},dn=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},pn=String.fromCharCode(30),Do=(t,e)=>{const r=t.length,n=new Array(r);let a=0;t.forEach((l,u)=>{un(l,!1,h=>{n[u]=h,++a===r&&e(n.join(pn))})})},Mo=(t,e)=>{const r=t.split(pn),n=[];for(let a=0;a<r.length;a++){const l=fn(r[a],e);if(n.push(l),l.type==="error")break}return n},gn=4;function O(t){if(t)return Po(t)}function Po(t){for(var e in O.prototype)t[e]=O.prototype[e];return t}O.prototype.on=O.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};O.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};O.prototype.off=O.prototype.removeListener=O.prototype.removeAllListeners=O.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===e||n.fn===e){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+t],this};O.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,e)}return this};O.prototype.emitReserved=O.prototype.emit;O.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};O.prototype.hasListeners=function(t){return!!this.listeners(t).length};const te=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function yn(t,...e){return e.reduce((r,n)=>(t.hasOwnProperty(n)&&(r[n]=t[n]),r),{})}const Uo=setTimeout,qo=clearTimeout;function ft(t,e){e.useNativeTimers?(t.setTimeoutFn=Uo.bind(te),t.clearTimeoutFn=qo.bind(te)):(t.setTimeoutFn=setTimeout.bind(te),t.clearTimeoutFn=clearTimeout.bind(te))}const $o=1.33;function jo(t){return typeof t=="string"?Wo(t):Math.ceil((t.byteLength||t.size)*$o)}function Wo(t){let e=0,r=0;for(let n=0,a=t.length;n<a;n++)e=t.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}class Ho extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}}class _n extends O{constructor(e){super(),this.writable=!1,ft(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,r,n){return super.emitReserved("error",new Ho(e,r,n)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=fn(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const mn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),$t=64,Vo={};let Or=0,Ve=0,Fr;function Lr(t){let e="";do e=mn[t%$t]+e,t=Math.floor(t/$t);while(t>0);return e}function wn(){const t=Lr(+new Date);return t!==Fr?(Or=0,Fr=t):t+"."+Lr(Or++)}for(;Ve<$t;Ve++)Vo[mn[Ve]]=Ve;function bn(t){let e="";for(let r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e}function Yo(t){let e={},r=t.split("&");for(let n=0,a=r.length;n<a;n++){let l=r[n].split("=");e[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return e}let En=!1;try{En=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const Go=En;function Rn(t){const e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Go))return new XMLHttpRequest}catch{}if(!e)try{return new te[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Ko(){}const zo=function(){return new Rn({xdomain:!1}).responseType!=null}();class Xo extends _n{constructor(e){if(super(e),this.polling=!1,typeof location!="undefined"){const n=location.protocol==="https:";let a=location.port;a||(a=n?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||a!==e.port,this.xs=e.secure!==n}const r=e&&e.forceBase64;this.supportsBinary=zo&&!r}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Mo(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Do(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const r=this.opts.secure?"https":"http";let n="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=wn()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);const a=bn(e),l=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(l?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(a.length?"?"+a:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new H(this.uri(),e)}doWrite(e,r){const n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(a,l)=>{this.onError("xhr post error",a,l)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}}class H extends O{constructor(e,r){super(),ft(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){const e=yn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const r=this.xhr=new Rn(e);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document!="undefined"&&(this.index=H.requestsCount++,H.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Ko,e)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete H.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}H.requestsCount=0;H.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Dr);else if(typeof addEventListener=="function"){const t="onpagehide"in te?"pagehide":"unload";addEventListener(t,Dr,!1)}}function Dr(){for(let t in H.requests)H.requests.hasOwnProperty(t)&&H.requests[t].abort()}const Jo=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0))(),Ye=te.WebSocket||te.MozWebSocket,Mr=!0,Zo="arraybuffer",Pr=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Qo extends _n{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),r=this.opts.protocols,n=Pr?{}:yn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Mr&&!Pr?r?new Ye(e,r):new Ye(e):new Ye(e,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType||Zo,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],a=r===e.length-1;un(n,this.supportsBinary,l=>{const u={};try{Mr&&this.ws.send(l)}catch{}a&&Jo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const r=this.opts.secure?"wss":"ws";let n="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=wn()),this.supportsBinary||(e.b64=1);const a=bn(e),l=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(l?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(a.length?"?"+a:"")}check(){return!!Ye}}const ea={websocket:Qo,polling:Xo},ta=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ra=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jt(t){const e=t,r=t.indexOf("["),n=t.indexOf("]");r!=-1&&n!=-1&&(t=t.substring(0,r)+t.substring(r,n).replace(/:/g,";")+t.substring(n,t.length));let a=ta.exec(t||""),l={},u=14;for(;u--;)l[ra[u]]=a[u]||"";return r!=-1&&n!=-1&&(l.source=e,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=na(l,l.path),l.queryKey=ia(l,l.query),l}function na(t,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&n.splice(0,1),e.substr(e.length-1,1)=="/"&&n.splice(n.length-1,1),n}function ia(t,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,l){a&&(r[a]=l)}),r}class Z extends O{constructor(e,r={}){super(),e&&typeof e=="object"&&(r=e,e=null),e?(e=jt(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=jt(r.host).host),ft(this,r),this.secure=r.secure!=null?r.secure:typeof location!="undefined"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=r.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Yo(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=gn,r.transport=e,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new ea[e](n)}open(){let e;if(this.opts.rememberUpgrade&&Z.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),n=!1;Z.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",_=>{if(!n)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Z.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(y(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const w=new Error("probe error");w.transport=r.name,this.emitReserved("upgradeError",w)}}))};function l(){n||(n=!0,y(),r.close(),r=null)}const u=_=>{const w=new Error("probe error: "+_);w.transport=r.name,l(),this.emitReserved("upgradeError",w)};function h(){u("transport closed")}function g(){u("socket closed")}function m(_){r&&_.name!==r.name&&l()}const y=()=>{r.removeListener("open",a),r.removeListener("error",u),r.removeListener("close",h),this.off("close",g),this.off("upgrading",m)};r.once("open",a),r.once("error",u),r.once("close",h),this.once("close",g),this.once("upgrading",m),r.open()}onOpen(){if(this.readyState="open",Z.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=jo(a)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(e,r,n){return this.sendPacket("message",e,r,n),this}send(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const l={type:e,data:r,options:n};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){Z.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const r=[];let n=0;const a=e.length;for(;n<a;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}}Z.protocol=gn;function sa(t,e="",r){let n=t;r=r||typeof location!="undefined"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r!="undefined"?t=r.protocol+"//"+t:t="https://"+t),n=jt(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const l=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+l+":"+n.port+e,n.href=n.protocol+"://"+l+(r&&r.port===n.port?"":":"+n.port),n}const oa=typeof ArrayBuffer=="function",aa=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Cn=Object.prototype.toString,ca=typeof Blob=="function"||typeof Blob!="undefined"&&Cn.call(Blob)==="[object BlobConstructor]",la=typeof File=="function"||typeof File!="undefined"&&Cn.call(File)==="[object FileConstructor]";function er(t){return oa&&(t instanceof ArrayBuffer||aa(t))||ca&&t instanceof Blob||la&&t instanceof File}function Ze(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Ze(t[r]))return!0;return!1}if(er(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ze(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Ze(t[r]))return!0;return!1}function ha(t){const e=[],r=t.data,n=t;return n.data=Wt(r,e),n.attachments=e.length,{packet:n,buffers:e}}function Wt(t,e){if(!t)return t;if(er(t)){const r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=Wt(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Wt(t[n],e));return r}return t}function ua(t,e){return t.data=Ht(t.data,e),t.attachments=void 0,t}function Ht(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Ht(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Ht(t[r],e));return t}const fa=5;var C;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(C||(C={}));class da{constructor(e){this.replacer=e}encode(e){return(e.type===C.EVENT||e.type===C.ACK)&&Ze(e)?(e.type=e.type===C.EVENT?C.BINARY_EVENT:C.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===C.BINARY_EVENT||e.type===C.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=ha(e),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}class tr extends O{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string")r=this.decodeString(e),r.type===C.BINARY_EVENT||r.type===C.BINARY_ACK?(this.reconstructor=new pa(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r);else if(er(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const n={type:Number(e.charAt(0))};if(C[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===C.BINARY_EVENT||n.type===C.BINARY_ACK){const l=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const u=e.substring(l,r);if(u!=Number(u)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(u)}if(e.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(l,r)}else n.nsp="/";const a=e.charAt(r+1);if(a!==""&&Number(a)==a){const l=r+1;for(;++r;){const u=e.charAt(r);if(u==null||Number(u)!=u){--r;break}if(r===e.length)break}n.id=Number(e.substring(l,r+1))}if(e.charAt(++r)){const l=this.tryParse(e.substr(r));if(tr.isPayloadValid(n.type,l))n.data=l;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case C.CONNECT:return typeof r=="object";case C.DISCONNECT:return r===void 0;case C.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case C.EVENT:case C.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case C.ACK:case C.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class pa{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=ua(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var ga=Object.freeze(Object.defineProperty({__proto__:null,protocol:fa,get PacketType(){return C},Encoder:da,Decoder:tr},Symbol.toStringTag,{value:"Module"}));function $(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const ya=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class vn extends O{constructor(e,r,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[$(e,"open",this.onopen.bind(this)),$(e,"packet",this.onpacket.bind(this)),$(e,"error",this.onerror.bind(this)),$(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(ya.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');r.unshift(e);const n={type:C.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,h=r.pop();this._registerAckCallback(u,h),n.id=u}const a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,r){const n=this.flags.timeout;if(n===void 0){this.acks[e]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...l)=>{this.io.clearTimeoutFn(a),r.apply(this,[null,...l])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:C.CONNECT,data:e})}):this.packet({type:C.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case C.CONNECT:if(e.data&&e.data.sid){const a=e.data.sid;this.onconnect(a)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case C.EVENT:case C.BINARY_EVENT:this.onevent(e);break;case C.ACK:case C.BINARY_ACK:this.onack(e);break;case C.DISCONNECT:this.ondisconnect();break;case C.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:C.ACK,id:e,data:a}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(r.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:C.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,e.data)}}}function Ae(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ae.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};Ae.prototype.reset=function(){this.attempts=0};Ae.prototype.setMin=function(t){this.ms=t};Ae.prototype.setMax=function(t){this.max=t};Ae.prototype.setJitter=function(t){this.jitter=t};class Vt extends O{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,ft(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Ae({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const a=r.parser||ga;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Z(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=$(r,"open",function(){n.onopen(),e&&e()}),l=$(r,"error",u=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",u),e?e(u):n.maybeReconnectOnOpen()});if(this._timeout!==!1){const u=this._timeout;u===0&&a();const h=this.setTimeoutFn(()=>{a(),r.close(),r.emit("error",new Error("timeout"))},u);this.opts.autoUnref&&h.unref(),this.subs.push(function(){clearTimeout(h)})}return this.subs.push(a),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push($(e,"ping",this.onping.bind(this)),$(e,"data",this.ondata.bind(this)),$(e,"error",this.onerror.bind(this)),$(e,"close",this.onclose.bind(this)),$(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n||(n=new vn(this,e,r),this.nsps[e]=n),n}_destroy(e){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Be={};function Qe(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const r=sa(t,e.path||"/socket.io"),n=r.source,a=r.id,l=r.path,u=Be[a]&&l in Be[a].nsps,h=e.forceNew||e["force new connection"]||e.multiplex===!1||u;let g;return h?g=new Vt(n,e):(Be[a]||(Be[a]=new Vt(n,e)),g=Be[a]),r.query&&!e.query&&(e.query=r.queryKey),g.socket(r.path,e)}Object.assign(Qe,{Manager:Vt,Socket:vn,io:Qe,connect:Qe});let Oe=null;const _a="http://localhost:4000",ma="answer-want-connect",wa="answer-want-offer-signal";function Sn(){Oe||(Oe=Qe(_a),console.log("createSocket",Oe))}async function ba(t){return new Promise((e,r)=>{Sn(),Oe.emit(ma,t,n=>{n?e(n):r("Not found offer with code "+t)})})}function Ea(t,e){Sn(),Oe.emit(wa,{code:t,answer:e})}function Ra(t,e,r){const{width:n,height:a}=r,l=parseFloat(t*100/n).toFixed(2),u=parseFloat(e*100/a).toFixed(2);return{x:l,y:u}}async function Ca(t){try{const e={initiator:!1,trickle:!1,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]}},r=await ba(t),n=new xo(e);return n.signal(r),n.on("signal",async l=>{l.type==="answer"&&Ea(t,l)}),{mouseClick(l,u,h){const g={click:!0,...Ra(l,u,h)};console.log(g),n.send(JSON.stringify(g))},onConnect(l){n.on("connect",l)},onClose(l){n.on("close",l)},onStream(l){n.on("stream",l)},disconnect(){n.destroy()}}}catch(e){throw new Error(e)}}function va(t,e){return Q(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[nt("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}function Sa(t,e){return Q(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[nt("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])}function Ta(t,e){return Q(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[nt("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})])}var Tn=(t,e)=>{const r=t.__vccOpts||t;for(const[n,a]of e)r[n]=a;return r};const Aa={name:"StatusBanner",components:{SwitchVerticalIcon:Ta,ExclamationCircleIcon:va,ShieldCheckIcon:Sa},props:{status:{type:String,required:!0}},computed:{bgcolor(){return this.status==="Connected"?"bg-green-600":this.status==="Connecting"?"bg-yellow-600":this.status==="Failed"?"bg-red-600":"bg-gray-600"},bgcolorIcon(){return this.status==="Connected"?"bg-green-500":this.status==="Connecting"?"bg-yellow-500":this.status==="Failed"?"bg-red-500":"bg-gray-500"}},emits:["disconnect"]},xa={class:"max-w-7xl mx-auto py-3 px-3 sm:px-6 lg:px-8"},Ba={class:"flex items-center justify-between flex-wrap"},ka={class:"w-0 flex-1 flex items-center"},Ia={class:"ml-3 font-medium text-white truncate"},Na={class:"md:hidden"},Oa={class:"hidden md:inline"},Fa={class:"order-3 mt-2 flex-shrink-0 w-full sm:order-2 sm:mt-0 sm:w-auto"};function La(t,e,r,n,a,l){const u=Ge("SwitchVerticalIcon"),h=Ge("ShieldCheckIcon"),g=Ge("ExclamationCircleIcon");return Q(),Ur("div",{class:fr(l.bgcolor)},[q("div",xa,[q("div",Ba,[q("div",ka,[q("span",{class:fr(["flex","p-2","rounded-lg","bg-indigo-800",l.bgcolorIcon])},[r.status==="Connecting"?(Q(),_e(u,{key:0,class:"w-6 h-6 text-white"})):_t("",!0),r.status==="Connected"?(Q(),_e(h,{key:1,class:"w-6 h-6 text-white"})):_t("",!0),r.status==="Failed"?(Q(),_e(g,{key:2,class:"h-6 w-6 text-white","aria-hidden":"true"})):_t("",!0)],2),q("p",Ia,[q("span",Na,dr(r.status),1),q("span",Oa,dr(r.status),1)])]),q("div",Fa,[q("button",{class:"flex items-center justify-center px-4 py-2 border border-transparent rounded shadow-md text-sm font-medium text-indigo-600 bg-white hover:bg-indigo-50",onClick:e[0]||(e[0]=m=>t.$emit("disconnect"))}," Disconnect ")])])])],2)}var Da=Tn(Aa,[["render",La]]);const Ma={name:"Remote",components:{StatusBanner:Da},data(){return{connected:!1,failed:!1,rtcInstance:null}},computed:{connectionState(){return this.connected?"Connected":this.failed?"Failed":"Connecting"}},async mounted(){try{const t=this.$route.params.code;this.rtcInstance=await Ca(t),this.rtcInstance.onStream(this.onStream),this.rtcInstance.onConnect(this.onConnect),this.rtcInstance.onClose(this.onDisconnect)}catch(t){this.failed=!0,console.error(t)}},beforeDestroy(){this.rtcInstance.disconnect()},methods:{onStream(t){this.$refs.video.srcObject=t,this.$refs.video.play()},onConnect(){this.connected=!0},onDisconnect(){this.connected=!1},handleClick(t){console.log("click");const{offsetX:e,offsetY:r}=t,n=document.getElementById("video"),a={width:n.offsetWidth,height:n.offsetHeight};this.rtcInstance.mouseClick(e,r,a)},handleDisconnect(){this.$router.go(-1)}}},Pa={class:"flex flex-col flex-1 justify-center bg-black"},Ua={class:"flex-1"};function qa(t,e,r,n,a,l){const u=Ge("StatusBanner");return Q(),Ur("div",Pa,[nt(u,{status:l.connectionState,onDisconnect:l.handleDisconnect},null,8,["status","onDisconnect"]),q("div",Ua,[q("video",{class:"h-fit w-full border-dashed border-2 border-slate-500",id:"video",ref:"video",onClick:e[0]||(e[0]=Wn((...h)=>l.handleClick&&l.handleClick(...h),["prevent"]))},null,512)])])}var Wa=Tn(Ma,[["render",qa]]);export{Wa as default};
